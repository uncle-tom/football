# Футбольное сообщество

Мне нравится идея реддита. Открытое комьюнити, где люди могут обсудить любую новость. Кажется, что нашему футбольному сообществу такой вещи как раз и не хватает. Многие сайты ориентируются не на болельщика, а на количество просмотров. Это плохо, но это возможно поменять, если создать для фанатов специальную площадку, где им будет удобно получать новую информацию и комфорнтно обсуждать новости.

## Парсер

В начале, когда активных пользователей не так много, необходимо было придумать решение, которое позволит наполнить сайт - быстро и эффективно. 

Чтобы не ходить по всем топовым сайтам и не добавлять в ручную интересные ссылки, я написал простой парсер. 

Собираем заголовки новостей и ссылки на страницы:

```ruby
def parse
	@categories = Category.all
	require 'open-uri'
	require 'nokogiri'
	require 'json'

	url_ua_football = 'https://www.ua-football.com/'
	html_ua_football = open(url_ua_football)

	doc_ua_football = Nokogiri::HTML(html_ua_football)
	@ua_football = []
	doc_ua_football.css('#allnews li').each do |showing|
		title_el = showing.at_css('a')
		title = title_el.text.strip
		link = showing.at_css('a').attr('href')
		@ua_football.push(
			title: title,
			link: link,
		)
	end
end
```

Вот так это выглядит: 

![alt](http://joxi.ru/gmvW6pbSLL7j42.png "Parser")

## Рейтинг

У пользователей есть возможность оценивать ссылку. Круто - стрелка вверх. Отстой - стрелка вниз. Таким образом, во вкладке "Лучшее" отображаются только топовые записи за последние 24 часа. 

```ruby
	@posts = Post.where(created_at:  (Time.now - 24.hours)..Time.now)
```

![alt](http://dl3.joxi.net/drive/2018/06/24/0026/1944/1718168/68/fb89d5605f.png "Rating")

## Комментирование

Как же без комментариев на футбольном сайте? :) 
Люди должны высказаться! 
**"Суркис все купил"**
**"Продались Ахметову"**
**"Развалили футбол в Украине"**

![alt](http://dl3.joxi.net/drive/2018/06/24/0026/1944/1718168/68/7302c0baf4.png "Comment")